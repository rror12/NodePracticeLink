{"ast":null,"code":"var _jsxFileName = \"/var/www/ttpl-rt-234-php82.local/public/nodepractice/frontend/src/components/NotificationsTab.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport './NotificationsTab.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NotificationsTab() {\n  _s();\n  var _JSON$parse;\n  const [requests, setRequests] = useState([]);\n  const currentUser = (_JSON$parse = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.user;\n  // console.log(\"I am currentUser in NotificationsTab: \", currentUser);\n\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const res = await axios.get(`http://localhost:5000/api/friend-request/${currentUser._id}`);\n        setRequests(res.data);\n      } catch (err) {\n        console.error(\"Failed to load requests\", err);\n      }\n    };\n    fetchRequests();\n  }, [currentUser]);\n  const handleAccept = async fromUserId => {\n    try {\n      await axios.post(\"http://localhost:5000/api/friend-request/accept\", {\n        from: fromUserId,\n        to: currentUser._id\n      });\n      setRequests(prev => prev.filter(r => r.from._id !== fromUserId));\n    } catch (err) {\n      alert(\"Error accepting request\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"friend-requests-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Friend Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), requests.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No new requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this) : requests.map(req => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [req.from.fname, \" \", req.from.lname, \" has sent you a friend request\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAccept(req.from._id),\n        children: \"Accept\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this)]\n    }, req._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n_s(NotificationsTab, \"MIcAFnHRaJFubpcUtYXSDqOxSqY=\");\n_c = NotificationsTab;\nexport default NotificationsTab;\nvar _c;\n$RefreshReg$(_c, \"NotificationsTab\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","NotificationsTab","_s","_JSON$parse","requests","setRequests","currentUser","JSON","parse","localStorage","getItem","user","fetchRequests","res","get","_id","data","err","console","error","handleAccept","fromUserId","post","from","to","prev","filter","r","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","req","fname","lname","onClick","_c","$RefreshReg$"],"sources":["/var/www/ttpl-rt-234-php82.local/public/nodepractice/frontend/src/components/NotificationsTab.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport './NotificationsTab.css';\n\nfunction NotificationsTab() {\n  const [requests, setRequests] = useState([]);\n  const currentUser = JSON.parse(localStorage.getItem(\"user\"))?.user;\n  // console.log(\"I am currentUser in NotificationsTab: \", currentUser);\n  \n\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const res = await axios.get(`http://localhost:5000/api/friend-request/${currentUser._id}`);\n        setRequests(res.data);\n      } catch (err) {\n        console.error(\"Failed to load requests\", err);\n      }\n    };\n\n    fetchRequests();\n  }, [currentUser]);\n\n  const handleAccept = async (fromUserId) => {\n    try {\n      await axios.post(\"http://localhost:5000/api/friend-request/accept\", {\n        from: fromUserId,\n        to: currentUser._id\n      });\n      setRequests(prev => prev.filter(r => r.from._id !== fromUserId));\n    } catch (err) {\n      alert(\"Error accepting request\");\n    }\n  };\n\n  return (\n    <div className=\"friend-requests-container\">\n      <h2>Friend Requests</h2>\n      {requests.length === 0 ? (\n        <p>No new requests</p>\n      ) : (\n        requests.map((req) => (\n          <div key={req._id} className=\"notification-card\">\n            <span>\n              {req.from.fname} {req.from.lname} has sent you a friend request\n            </span>\n            <button onClick={() => handleAccept(req.from._id)}>Accept</button>\n          </div>\n        ))\n      )}\n    </div>\n  );\n}\n\nexport default NotificationsTab;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}